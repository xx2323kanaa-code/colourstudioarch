<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Colorful Custom Hand AI Project</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- 外部CSS -->
  <link rel="stylesheet" href="style.css" />

  <!-- MediaPipe Task Vision -->
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@0.10.5/vision_bundle.js"></script>

  <!-- COCO-SSD (TensorFlow.js) -->
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-core"></script>
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-converter"></script>
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-backend-webgl"></script>
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/coco-ssd"></script>

</head>
<body>

<!-- ===========================
     Top Header
=========================== -->
<header id="topHeader">
  <div id="titleArea">
    <h1>Colorful Custom Hand AI Project</h1>
    <div id="languageLabel">Display language: English</div>
  </div>

  <!-- Fold Menu -->
  <div id="menuWrapper">
    <button id="menuToggle">≡</button>
    <div id="menuPanel" class="hidden">

      <div class="menu-section">
        <h3>Camera</h3>
        <select id="cameraSelect">
          <option value="front">Front camera</option>
          <option value="back0">Back camera 0</option>
          <option value="back1">Back camera 1</option>
          <option value="back2">Back camera 2</option>
          <option value="back3">Back camera 3</option>
        </select>
      </div>

      <div class="menu-section">
        <h3>Max Results</h3>
        <input type="range" id="maxResults" min="1" max="3" value="1">
        <span id="maxResultsValue">1</span>
      </div>

      <div class="menu-section">
        <h3>Score Threshold</h3>
        <input type="range" id="scoreSlider" min="2" max="30" value="15">
        <span id="scoreValue">15%</span>
      </div>

      <div class="menu-section">
        <h3>Freeze Duration</h3>
        <input type="range" id="freezeSlider" min="2" max="10" value="3">
        <span id="freezeValue">3 sec</span>
      </div>

    </div>
  </div>
</header>

<!-- ===========================
     Main Container
=========================== -->
<div id="appContainer">

  <!-- ========== Video + Overlay ========== -->
  <div id="videoWrapper">
    <video id="video" autoplay playsinline></video>

    <!-- Overlay: bounding boxes + hand pose -->
    <canvas id="bboxCanvas"></canvas>

    <svg id="overlaySvg" viewBox="0 0 220 220" preserveAspectRatio="xMidYMid meet">

      <!-- RELAXED -->
      <g id="handRelaxed" class="hand-svg active">
        <!-- palm -->
        <rect x="80" y="90" width="60" height="70" rx="20" ry="20" class="palm-line" />

        <!-- wrist (2 parallel lines) -->
        <line x1="100" y1="160" x2="100" y2="188" class="wrist-line" />
        <line x1="120" y1="160" x2="120" y2="188" class="wrist-line" />

        <!-- knuckle -->
        <circle cx="110" cy="160" r="4" fill="#ccc" />

        <!-- fingers -->
        <line x1="96" y1="90"  x2="96"  y2="65" class="finger"/>
        <circle cx="96" cy="90" r="4" class="finger-joint" />
        <circle cx="96" cy="65" r="4" class="finger-joint" />

        <line x1="110" y1="88" x2="110" y2="60" class="finger"/>
        <circle cx="110" cy="88" r="4" class="finger-joint" />
        <circle cx="110" cy="60" r="4" class="finger-joint" />

        <line x1="124" y1="90" x2="124" y2="66" class="finger"/>
        <circle cx="124" cy="90" r="4" class="finger-joint" />
        <circle cx="124" cy="66" r="4" class="finger-joint" />
      </g>

      <!-- PEN -->
      <g id="handPen" class="hand-svg">
        <rect x="80" y="90" width="60" height="70" rx="20" ry="20" class="palm-line" />

        <!-- wrist -->
        <line x1="100" y1="160" x2="100" y2="188" class="wrist-line" />
        <line x1="120" y1="160" x2="120" y2="188" class="wrist-line" />

        <circle cx="110" cy="160" r="4" fill="#ccc" />

        <!-- fingers -->
        <line x1="100" y1="100" x2="102" y2="70" class="finger"/>
        <circle cx="100" cy="100" r="4" class="finger-joint"/>
        <circle cx="102" cy="70"  r="4" class="finger-joint"/>

        <line x1="116" y1="100" x2="114" y2="70" class="finger"/>
        <circle cx="116" cy="100" r="4" class="finger-joint"/>
        <circle cx="114" cy="70"  r="4" class="finger-joint"/>

        <!-- pen object -->
        <line x1="100" y1="80" x2="118" y2="120" class="pen-body" />
      </g>

      <!-- PHONE -->
      <g id="handPhone" class="hand-svg">
        <!-- phone -->
        <rect x="92" y="60" width="50" height="90" rx="8" ry="8" class="phone-body" />

        <!-- palm -->
        <rect x="80" y="95" width="60" height="65" rx="20" ry="20" class="palm-line" />

        <!-- wrist -->
        <line x1="100" y1="160" x2="100" y2="188" class="wrist-line" />
        <line x1="120" y1="160" x2="120" y2="188" class="wrist-line" />

        <circle cx="110" cy="160" r="4" fill="#ccc" />
      </g>

      <!-- KEY -->
      <g id="handKey" class="hand-svg">
        <rect x="80" y="95" width="60" height="65" rx="20" ry="20" class="palm-line" />

        <!-- wrist -->
        <line x1="100" y1="160" x2="100" y2="188" class="wrist-line" />
        <line x1="120" y1="160" x2="120" y2="188" class="wrist-line" />

        <circle cx="110" cy="160" r="4" fill="#ccc" />

        <!-- corrected KEY finger layout -->
        <line x1="108" y1="100" x2="132" y2="102" class="finger"/>
        <circle cx="108" cy="100" r="4" class="finger-joint"/>
        <circle cx="132" cy="102" r="4" class="finger-joint"/>

        <line x1="110" y1="108" x2="135" y2="112" class="finger"/>
        <circle cx="110" cy="108" r="4" class="finger-joint"/>
        <circle cx="135" cy="112" r="4" class="finger-joint"/>

        <!-- key body -->
        <rect x="60" y="112" width="26" height="4" class="key-body"/>
        <rect x="86" y="105" width="20" height="18" rx="9" ry="9" class="key-body"/>
      </g>

      <!-- SALUTE -->
      <g id="handSalute" class="hand-svg">
        <rect x="90" y="80" width="50" height="70" rx="12" ry="12" class="salute-palm"/>

        <!-- wrist -->
        <line x1="100" y1="150" x2="100" y2="188" class="wrist-line" />
        <line x1="120" y1="150" x2="120" y2="188" class="wrist-line" />
      </g>

      <text id="overlayHud" x="110" y="210" text-anchor="middle">---</text>
    </svg>

  </div>
  <!-- ===========================
       Result & Controls
  =========================== -->
  <div id="resultArea">
    <div id="result">State: RELAXED</div>
    <div id="status">Ready.</div>
  </div>

  <div id="controlPanel">
    <button id="simNone" class="sim-btn">None</button>
    <button id="simPen" class="sim-btn">Pen</button>
    <button id="simPhone" class="sim-btn">Phone</button>
    <button id="simKey" class="sim-btn">Key</button>
    <button id="simSalute" class="sim-btn">Salute</button>

    <br />

    <button id="miniOpenBtn">Mini-Open</button>
    <button id="lockBtn">Lock</button>
    <button id="relaxBtn">Full Relax</button>

    <br />

    <button id="startCameraBtn">Start Camera</button>
  </div>

</div> <!-- end of appContainer -->


<!-- ===========================
     JavaScript
=========================== -->
<script src="app.js"></script>

</body>
</html>
